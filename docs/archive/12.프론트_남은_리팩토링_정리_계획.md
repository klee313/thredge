# 프론트 남은 리팩토링 정리 계획

## 배경/문제
- HomeFeed에서 상태 액션 그룹화를 진행했지만 일부 정리 미완료와 들여쓰기 오류가 남아 유지보수성이 떨어짐.
- ThreadDetailPage와 ThreadCard 헤더 UI 로직이 중복되어 수정 시 동기화 비용이 큼.
- API 요청 함수들이 fetch 보일러플레이트를 반복해 에러 처리/옵션 관리가 산재.

## 목표
- HomeFeed 상태 액션 사용을 일관화하고 코드 품질 문제를 제거한다.
- 스레드 카드/상세 헤더 UI를 공통 컴포넌트로 정리한다.
- API 요청 유틸을 도입해 반복 코드를 줄이고 에러 메시지를 표준화한다.

## 범위
- 포함
  - HomeFeed 액션/유틸 사용 정리 및 간단한 구조 개선
  - ThreadCardHeader와 ThreadDetailPage 헤더 공통화
  - API fetch 유틸 함수 추가 및 기존 API 함수 리팩토링
- 제외
  - UI/디자인 전면 변경
  - 백엔드 API 스펙 변경
  - 대규모 상태 관리 라이브러리 도입

## 현재 동작 정리
- HomeFeed는 `useHomeFeedState`에서 그룹화된 actions를 사용하지만 일부 미정리 구간이 존재.
- ThreadCardHeader는 HomeFeed에서만 사용하며 ThreadDetailPage는 자체 헤더 UI를 유지.
- `frontend/src/lib/api.ts`가 각 요청마다 동일한 fetch 옵션/에러 처리 패턴을 반복.

## 개선 방향
- 상태 변경은 그룹화된 actions를 통해 일관되게 호출한다.
- 스레드 헤더는 재사용 컴포넌트로 분리해 Home/Detail에서 동일하게 사용한다.
- fetch 보일러플레이트를 공통 유틸로 흡수하고, 호출부는 목적에 집중한다.

## 단계별 계획
- Phase 1: HomeFeed 정리
  - HomeFeed의 액션 사용 누락/오타/들여쓰기 문제를 정리
  - 불필요한 중복 로직을 최소화
  - 완료 기준: 타입/린트 오류 없이 일관된 액션 호출 구조
- Phase 2: 스레드 헤더 공통화
  - ThreadDetailPage의 헤더 UI를 공통 컴포넌트로 이전
  - 필요한 props를 정리해 Home/Detail 모두 대응
  - 완료 기준: Home/Detail 헤더 UI 로직 중복 제거
- Phase 3: API 유틸 도입
  - JSON 응답/빈 응답을 처리하는 공통 helper 추가
  - `api.ts` 각 함수에서 helper 사용하도록 변경
  - 완료 기준: fetch 옵션/에러 처리 중복 제거

## 리스크 및 대응
- 공통 컴포넌트화로 인해 props 증가 가능
  - 대응: Home/Detail에서 실제로 필요한 최소 props만 노출
- API 유틸 도입 시 에러 메시지 변경 가능
  - 대응: 기존 메시지 포맷을 유지하거나 호환되게 매핑

## 검증 계획
- HomeFeed에서 쓰레드 작성/검색/필터 동작 수동 확인
- ThreadDetailPage에서 핀/뮤트/아카이브/카테고리 편집 동작 확인
- 네트워크 요청 실패 시 에러 메시지 확인
