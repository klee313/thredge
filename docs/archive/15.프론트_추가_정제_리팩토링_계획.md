# 프론트 추가 정제 리팩토링 계획

## 배경/문제
- ThreadDetailPage의 신규 엔트리 작성 폼이 공통 컴포넌트화되지 않아 중복이 남아 있음.
- EntryCard는 props와 핸들러가 많아 사용부가 복잡해짐.
- useThreadActions/useEntryActions 훅의 옵션 패턴이 부분적으로 불일치함.
- uiTokens가 카드/버튼에 집중되어 입력/태그 등은 여전히 분산됨.

## 목표
- 신규 엔트리 작성 폼을 공통 컴포넌트로 분리해 재사용성을 높인다.
- EntryCard 액션을 묶어 컴포넌트 사용부를 단순화한다.
- 액션 훅 옵션 패턴을 통일해 API 일관성을 확보한다.
- uiTokens를 확장해 스타일 관리 범위를 넓힌다.

## 범위
- 포함
  - EntryComposer 공통 컴포넌트 추가 및 적용
  - EntryCard 액션 타입/props 구조 단순화
  - useThreadActions/useEntryActions 옵션 통일
  - uiTokens 확장 및 주요 입력/태그 적용
- 제외
  - UI 전면 재디자인
  - 백엔드 API 변경
  - 상태 관리 라이브러리 교체

## 현재 동작 정리
- ThreadDetailPage에서 신규 엔트리 입력은 직접 textarea/버튼으로 구성됨.
- EntryCard는 개별 핸들러 props가 많아 호출부가 길어짐.
- 액션 훅의 invalidate 옵션 명명/기본값 패턴이 다름.
- uiTokens는 카드/버튼 위주로 사용됨.

## 개선 방향
- Entry 작성 폼을 공통 컴포넌트로 분리하고 기존 로직을 연결한다.
- EntryCard는 actions 객체를 받아 핸들러 전달을 단순화한다.
- 훅 옵션을 공통 패턴으로 맞추어 확장성을 확보한다.
- 입력/태그 스타일을 uiTokens로 통일한다.

## 단계별 계획
- Phase 1: EntryComposer 공통화
  - 공통 컴포넌트 추가
  - ThreadDetailPage/ThreadCard에서 적용
  - 완료 기준: 신규 엔트리 폼 중복 제거
- Phase 2: EntryCard 액션 구조 정리
  - actions 타입 정의 및 props 축소
  - 사용부 교체
  - 완료 기준: EntryCard 호출부 단순화
- Phase 3: 액션 훅 옵션 통일
  - useThreadActions/useEntryActions 옵션 구조 통일
  - 완료 기준: 훅 API가 일관된 형태
- Phase 4: uiTokens 확장
  - 입력/태그 스타일 토큰 추가
  - 주요 컴포넌트 적용
  - 완료 기준: 스타일 중복 감소

## 리스크 및 대응
- EntryCard 변경으로 인한 props 불일치 가능
  - 대응: 타입 정의로 컴파일 단계에서 검증
- uiTokens 확장으로 스타일 차이 발생 가능
  - 대응: 적용 컴포넌트 단위로 확인

## 검증 계획
- ThreadDetailPage/ThreadCard에서 신규 엔트리 작성 확인
- EntryCard 편집/뮤트/숨김/답글 동작 확인
- 액션 훅 사용부 타입 체크 확인
- 입력/태그 스타일 시각 확인
